@using OffLogs.Web.Core.Components.Form
@using Microsoft.AspNetCore.Components
@using OffLogs.Business.Common.Constants.Notificatiions
@using OffLogs.Web.Resources

@inherits BaseComponent

<h2>
    @if (_isNew)
    {
        @NotificationResources.AddNewTemplate
    }
    else
    {
        <text>#@(_model.Id)</text>
    }
</h2>
    
<MyEditForm OnValidSubmit="@HandleSubmit"
            EditContext="@_editContext"
            @ref="@_editForm">
    <DataAnnotationsValidator/>
    <ValidationSummary/>
    <div>
        @* <CustomInputText *@
        @*     IsDisabled="@_isLoading" *@
        @*     Label="@NotificationResources.MessageTemplate_Subject" *@
        @*     @bind-Value="@_model.Period"/> *@
    </div>
    <div class="row mb-3">
        <div class="col">
            <CustomDropDown
                Items="@_messageTemplateDownListItems"
                OnChanged="@(value => _model.TemplateId = value.IdAsLong)"/>
        </div>
    </div>
    <div class="row mb-3">
        <div class="col">
            <CustomDropDown
                Items="@_applicationDownListItems"
                OnChanged="@(value => _model.ApplicationId = value?.IdAsLong)"
            />
        </div>
    </div>
    <div class="row mb-3">
        <div class="col">
            <CustomDropDown
                Items="@_operatorTypesDownListItems"
                OnChanged="@(value => { })"
            />
        </div>
    </div>
    <hr/>
    @if (_isLoading)
    {
        <Preloader />
    }
    else
    {
        <MyButton IsSubmit="true">
            @if (_isNew)
            {
                @CommonResources.Add
            }
            else
            {
                @CommonResources.Save
            }
        </MyButton>
    }
</MyEditForm>

<ConfirmationModal
    Title="@NotificationResources.Confirmation_AreSureToDeleteTemplate" 
    IsShow="@_isShowDeleteModal"
    OnOk="@(async () => await OnDeleteAppAsync())"
    OnCancel="@(() => _isShowDeleteModal = false)"/>
