node('production') {
    stage('Checkout') {
        checkout scm
        sh 'ls -sh'
    }
    
    stage('Build Docker image') {
        sh 'df -h'
        sh 'docker build --tag="offlogs-production-web" --file="devops/publish/Dockerfile" .'
    }
    
    stage('Save Docker image') {
        sh 'ls -sh'
//         sh 'docker save offlogs-production-web  | gzip > image.tar.gz'
    }
    
    stage('Publish stash') {
//         stash name: 'target', includes: "**/*.tar"
    }
}
