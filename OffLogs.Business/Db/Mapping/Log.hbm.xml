<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping 
        xmlns="urn:nhibernate-mapping-2.2"
        namespace="OffLogs.Business.Db.Entity" 
        assembly="OffLogs.Business">

    <class name="LogEntity" table="logs">
        <id name="Id">
            <column name="id" sql-type="int" not-null="true"/>
            <generator class="native" />
        </id>

        <many-to-one 
            name="Application" 
            class="ApplicationEntity"
            column="application_id" 
            cascade="save-update"
        />
        <bag 
            name="Properties"
            lazy="false"
            inverse="true"
            cascade="all-delete-orphan"
        >
            <key column="log_id"/>
            <one-to-many class="LogPropertyEntity"/>
        </bag>
        <bag
                name="Traces"
                lazy="false"
                inverse="true"
                cascade="all-delete-orphan"
        >
            <key column="log_id"/>
            <one-to-many class="LogTraceEntity"/>
        </bag>

        <property name="Token">
            <column name="token" length="50" not-null="false" />
        </property>
        <property name="LevelId">
            <column name="level" length="10" not-null="true" />
        </property>
        <property name="IsFavorite">
            <column name="is_favorite" sql-type="boolean" not-null="true" />
        </property>
        <property name="Message">
            <column name="message" length="2048" not-null="true" />
        </property>
        <property name="LogTime">
            <column name="log_time" sql-type="datetime" not-null="true" />
        </property>
        <property name="CreateTime">
            <column name="create_time" sql-type="datetime" not-null="true" />
        </property>
    </class>
</hibernate-mapping>